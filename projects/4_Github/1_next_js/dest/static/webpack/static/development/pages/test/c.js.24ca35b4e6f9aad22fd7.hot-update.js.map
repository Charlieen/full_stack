{"version":3,"file":"static/webpack/static/development/pages/test/c.js.24ca35b4e6f9aad22fd7.hot-update.js","sources":["webpack:///./pages/test/c.js"],"sourcesContent":["import React,{useState ,useReducer,useContext,\n    useLayoutEffect,useEffect ,useRef, memo,useMemo,useCallback} from 'react'\n\nimport MyContext from '../../lib/my-context'\n\nfunction countReducer(state,action){\n    switch (action.type) {\n        case 'add':\n            return state+1\n            \n        case 'minus':\n            return state-1\n    \n        default:\n            return state;\n    }\n}\n/**\n *  函数式组件，在每次被 虚拟DOM 要求刷新时，如果 函数式组件 内部的 对象 或者 函数 都会 重新生成 新的，\n *  1. 不必要的 重新生成\n *  2.  由于重新生成，导致  值变化，需要 再次  组件刷新。\n * \n *  避免方法使用 useMemo(obj,[]) 处理 对象， useCallback(fn,[])处理函数\n */\nfunction MyCountFunc(){\n    const [count,dispatchCount]= useReducer(countReducer,0)\n    const [name,setName] = useState('charlie')\n// 每一次 MyCountFunc 组件 刷新，该config 都会重新生成新的对象，\n    const config = useMemo(()=>({\n        text:`count is ${count}`,\n        color:count>3? 'red':'blue',\n    }),[count])\n\n    // 每一次 MyCountFunc 组件 刷新，()=>dispatchCount({type:'add'}) 都会重新生成新的匿名函数，\n\n    // 写法1：\n    // const handleButtonClick = useCallback(()=>dispatchCount({type:'add'})\n    // ,[dispatchCount])\n\n    // 写法2：\n    const handleButtonClick = useMemo(()=> ()=>dispatchCount({type:'add'})\n        ,[])\n\n\n    return (\n        <div>\n            <input  value={name} onChange={(e)=>setName(e.target.value)}/>\n            <Child\n              config={config}\n              onButtonClick={ handleButtonClick}\n            />\n            <button on></button>\n        </div>\n    )\n}\n\nconst Child = memo( function Child({onButtonClick,config}) {\n    console.log('child render')\n    return (\n        <button onClick={onButtonClick} style={{ color:config.color}}>\n        {config.text}\n        </button>\n    )\n})\nexport default MyCountFunc"],"mappings":";;;;;;;;;;;;;;;;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;;;;;;;;;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAFA;AAAA;AAOA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAIA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;;;;A","sourceRoot":""}